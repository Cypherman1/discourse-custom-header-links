<script type="text/discourse-plugin" version="0.8.20">

  $(document).ready(function() {
        // Usescase
        $(document).on('mouseenter', '#Usecase', function() {
            $('#iddropUsecase').css("display","block");
            $('#Usecase').addClass('hoverColor');
            $('.usecase-icon').addClass('hoverColor');
            $('.usecase-ad').addClass('arrow-down');

            $('#iddropDocumentation').css("display","none");
            $('#Documentation').removeClass('hoverColor');
            $('.documentation-icon').removeClass('hoverColor');
            $('.documentation-ad').removeClass('arrow-down');

        });

        $(document).on('mouseleave', '#iddropUsecase', function() {
            $('#iddropUsecase').css("display","none");
            $('#Usecase').removeClass('hoverColor');
            $('.usecase-icon').removeClass('hoverColor');
            $('.usecase-ad').removeClass('arrow-down');
        });

        $(document).on('mouseenter', '.usecase-icon', function() {
            $('.iddropUsecase').css("display","block");
            $('#Usecase').addClass('hoverColor');
            $('.usecase-icon').addClass('hoverColor');
            $('.usecase-ad').addClass('arrow-down');

            $('#iddropDocumentation').css("display","none");
            $('#Documentation').removeClass('hoverColor');
            $('.documentation-icon').removeClass('hoverColor');
            $('.documentation-ad').removeClass('arrow-down');

        });

        // Documentation
        $(document).on('mouseenter', '#Documentation', function() {
            $('#iddropDocumentation').css("display","block");
            $('#Documentation').addClass('hoverColor');
            $('.documentation-icon').addClass('hoverColor');
            $('.documentation-ad').addClass('arrow-down');

            $('#iddropUsecase').css("display","none");
            $('#Usecase').removeClass('hoverColor');
            $('.usecase-icon').removeClass('hoverColor');
            $('.usecase-ad').removeClass('arrow-down');
        });
        $(document).on('mouseleave', '#iddropDocumentation', function() {
            $('#iddropDocumentation').css("display","none");
            $('#Documentation').removeClass('hoverColor');
            $('.documentation-icon').removeClass('hoverColor');
            $('.documentation-ad').removeClass('arrow-down');
        });

        $(document).on('mouseenter', '.documentation-icon', function() {
            $('.iddropDocumentation').css("display","block");
            $('#Documentation').addClass('hoverColor');
            $('.documentation-icon').addClass('hoverColor');
            $('.documentation-ad').addClass('arrow-down');

            $('#iddropUsecase').css("display","none");
            $('#Usecase').removeClass('hoverColor');
            $('.usecase-icon').removeClass('hoverColor');
            $('.usecase-ad').removeClass('arrow-down');
        });



  });

  const { iconNode } = require("discourse-common/lib/icon-library");
  const customHeaderLinks = settings.Custom_header_links;

  let icon = iconNode('user-times');



  if (!customHeaderLinks.length) return;

  const h = require("virtual-dom").h;
  const headerLinks = [];

  customHeaderLinks.split("|").map(i => {
    const seg = $.map(i.split(","), $.trim);
    const linkText = seg[0];
    const linkTitle = seg[1];
    const linkHref = seg[2];
    const deviceClass = `.${seg[3]}`;
    const linkTarget = seg[4] === "self" ? "" : "_blank";
    const keepOnScrollClass = seg[5] === "keep" ? ".keep" : "";
    const linkClass = `.${linkText.trim().toLowerCase().replace(/\s/gi, '-')}`;

    if (!linkTarget) {
      headerLinks.push(
        h(
          `li.headerLink${deviceClass}${keepOnScrollClass}${linkClass}${linkClass}-ad`,
          [
            h(
                "a",
                {
                  title: linkTitle,
                  id: linkTitle
                },
                linkText,
            ),
            h(
              `div.${linkClass}-icon`, iconNode('chevron-down', { class: "cv-down" })
            ),
          ],
        )
      );
    } else {
      headerLinks.push(
        h(
          `li.headerLink${deviceClass}${keepOnScrollClass}${linkClass}`,
          h(
            "a",
            {
              title: linkTitle,
              href: linkHref,
              target: linkTarget
            },
            linkText
          )
        )
      );
    }
  });

  api.decorateWidget("header-buttons:before", helper => {
    return helper.h(
      "ul.custom-header-links", headerLinks
    );
  });

  api.decorateWidget("home-logo:after", helper => {
    let titleVisible = helper.attrs.minimized;
    if (titleVisible) {
      $(".d-header").addClass("hide-menus");
    } else {
      $(".d-header").removeClass("hide-menus");
    }
  });
</script>
