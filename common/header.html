<script type="text/discourse-plugin" version="0.8.20">

    const setLangKr = () => {

        $('.btn_language .common_select_title').text("Korean / 한국어");

        $('#iddropDocumentation .gnb_cont_wrap .gnb_left_cont .gnb_menu_explain h3').text("데이터 과학자이신가요?");
        $('#iddropDocumentation .gnb_cont_wrap .gnb_left_cont .gnb_menu_explain p').html("Brightics AI로 데이터를 쉽게 분석할 수 있습니다.<br> 아래 메뉴를 확인하시고 데이터 분석을 시작하는 데 도움을 얻으세요.");

        $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .user_guide_name').html("사용자 가이드");
        $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .user_guide_cont').html("Brightics AI를 사용하는 법을 배워보세요.");

        $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .tuto_name').html("튜토리얼");
        $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .tuto_cont').html("여러 활용 예시 중에서 필요한 분석 모델을 찾고 따라해보세요.");

        $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .chart_name').html("차트 옵션 가이드");
        $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .chart_cont').html("각 차트 종류에 따라 어떤 옵션을 설정할 수 있는지 알아보세요.");

        $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .func_ref_name').html("함수 도움말");
        $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .func_ref_cont').html("Brightics AI에서 제공하는 함수들을 찾아보세요.");

        $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont .gnb_menu_explain h3').html("Brightics AI와 연계가 필요하신가요?");
        $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont .gnb_menu_explain p').html("개발자 가이드와 API 메뉴를 확인하시고. <br> 연계를 위한 유용한 자료를 찾아보세요.");

        $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont ul .gnb_menu_list .gnb_menu_icon05 .gnb_menu_name').html("개발자 가이드");
        $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont ul .gnb_menu_list .gnb_menu_icon05 .gnb_menu_cont').html("Brightics AI와 여러분의 제품을 연계하는 법을 배워보세요.");

        $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont ul .gnb_menu_list .gnb_menu_icon06 .gnb_menu_name').html("API");
        $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont ul .gnb_menu_list .gnb_menu_icon06 .gnb_menu_cont').html("Brightics AI에서 제공하는 다양한 API를 확인해보세요.");

        $('#iddropUsecase .gnb_cont_wrap  .gnb_menu_explain h3').html("도메인 별 샘플 모델을 확인해주세요");
        $('#iddropUsecase .gnb_cont_wrap  .gnb_menu_explain p').html("‘모델 찾아보기’ 버튼을 클릭하고 전체 샘플을 확인하세요. <br> 함수 및 데이터 메뉴는 2019년에 오픈됩니다.");

        $('#iddropUsecase .gnb_cont_wrap  ul .li_model .gnb_menu_name').html("모델");
        $('#iddropUsecase .gnb_cont_wrap  ul .li_model .gnb_menu_cont').html("활용 예시에서 필요한 분석 모델을 찾아 실행해보세요.");
        $('#iddropUsecase .gnb_cont_wrap  ul .li_model .gnb_menu_link').html("모델 찾아보기");

        $('#iddropUsecase .gnb_cont_wrap  ul .li_function .gnb_menu_name').html("함수");
        $('#iddropUsecase .gnb_cont_wrap  ul .li_function .gnb_menu_cont').html("Brightics AI에서 사용할 수 있는 분석함수들을 확인하고 실행해보세요.");

        $('#iddropUsecase .gnb_cont_wrap  ul .li_data .gnb_menu_name').html("데이터");
        $('#iddropUsecase .gnb_cont_wrap  ul .li_data .gnb_menu_cont').html("예시 데이터들을 찾아보고, Brightics AI에 직접 불러와 사용해보세요.");

        $('#iddropUsecase .usecase_open_in').html("2019년 오픈");

        $('#iddropHelp .gnb_menu_icon10 .gnb_menu_name').html("퀵 스타트");
        $('#iddropHelp .gnb_menu_icon10 .gnb_menu_cont').html("영상과 함께 Brightics AI의 사용법을 익히세요.");

        $('#iddropHelp .gnb_menu_icon11 .gnb_menu_name').html("Q&A");
        $('#iddropHelp .gnb_menu_icon11 .gnb_menu_cont').html("Brightics AI 사용자 커뮤니티에서 궁금증을 해결하세요.");

        $('#iddropHelp .gnb_menu_icon12 .gnb_menu_name').html("릴리즈 노트");
        $('#iddropHelp .gnb_menu_icon12 .gnb_menu_cont').html("Brightics AI의 최신 업데이트 내용을 확인하세요.");

    }

    const setLangEn = () => {
      // English Language


          $('.btn_language .common_select_title').text("Global / English");

          $('#iddropDocumentation .gnb_cont_wrap .gnb_left_cont .gnb_menu_explain h3').text("Are you a Data Scientist?");
          $('#iddropDocumentation .gnb_cont_wrap .gnb_left_cont .gnb_menu_explain p').html("Brightics AI allows you to analyze the data with ease. <br> Check out the menu below that will help to start your data analytics.");

          $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .user_guide_name').html("User Guide");
          $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .user_guide_cont').html("Learn how to use Brightics AI.");

          $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .tuto_name').html("Tutorial");
          $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .tuto_cont').html("Find the analytics model you need from examples and try them out.");

          $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .chart_name').html("Chart Option Guide");
          $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .chart_cont').html("Learn what setting options can be used for each chart type.");

          $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .func_ref_name').html("Function Reference");
          $('#iddropDocumentation ul .gnb_menu_list .gnb_menu_icon .func_ref_cont').html("Search functions offered by Brightics AI.");

          $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont .gnb_menu_explain h3').html("Do you want integration with Brightics AI?");
          $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont .gnb_menu_explain p').html("Explore developer guide and API menu. <br> and find the useful resources for integration.");

          $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont ul .gnb_menu_list .gnb_menu_icon05 .gnb_menu_name').html("Developer Guide");
          $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont ul .gnb_menu_list .gnb_menu_icon05 .gnb_menu_cont').html("Learn how to integrate your product with Brightics AI.");

          $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont ul .gnb_menu_list .gnb_menu_icon06 .gnb_menu_name').html("API");
          $('#iddropDocumentation .gnb_cont_wrap .gnb_right_cont ul .gnb_menu_list .gnb_menu_icon06 .gnb_menu_cont').html("Find various API, provided by Brightics AI.");

          $('#iddropUsecase .gnb_cont_wrap  .gnb_menu_explain h3').html("Explore domain-specific sample model");
          $('#iddropUsecase .gnb_cont_wrap  .gnb_menu_explain p').html("Click the ‘Browse by model’ button and see the entire samples. <br> Function and data menu will open in 2019.");

          $('#iddropUsecase .gnb_cont_wrap  ul .li_model .gnb_menu_name').html("Model");
          $('#iddropUsecase .gnb_cont_wrap  ul .li_model .gnb_menu_cont').html("Find the analytics model you need from examples and try them out.");
          $('#iddropUsecase .gnb_cont_wrap  ul .li_model .gnb_menu_link').html("Browse by model");

          $('#iddropUsecase .gnb_cont_wrap  ul .li_function .gnb_menu_name').html("Function");
          $('#iddropUsecase .gnb_cont_wrap  ul .li_function .gnb_menu_cont').html("Find and try out analytic functions that you can use in Brightics AI.");

          $('#iddropUsecase .usecase_open_in').html("Open in 2019");

          $('#iddropUsecase .gnb_cont_wrap  ul .li_data .gnb_menu_name').html("Data");
          $('#iddropUsecase .gnb_cont_wrap  ul .li_data .gnb_menu_cont').html("Find example dataset and import them into your Brightics AI.");

          $('#iddropHelp .gnb_menu_icon10 .gnb_menu_name').html("Quick Start");
          $('#iddropHelp .gnb_menu_icon10 .gnb_menu_cont').html("Watch the video and learn how to use Brightics AI.");

          $('#iddropHelp .gnb_menu_icon11 .gnb_menu_name').html("Q&A");
          $('#iddropHelp .gnb_menu_icon11 .gnb_menu_cont').html("Connect with Brightics AI users and resolve your questions.");

          $('#iddropHelp .gnb_menu_icon12 .gnb_menu_name').html("Release Note");
          $('#iddropHelp .gnb_menu_icon12 .gnb_menu_cont').html("Check the recent updates of Brightics AI.");

    }

    $(document).ready(function() {
          // Usescase


          $(document).on('mouseenter', '#Usecase', function() {
              $('#iddropUsecase').css("display","block");
              $('#Usecase').addClass('hoverColor');
              $('.usecase-icon svg').addClass('hoverColor');
              $('.usecase-ad').addClass('arrow-down');

              $('#iddropDocumentation').css("display","none");
              $('#Documentation').removeClass('hoverColor');
              $('.documentation-icon svg').removeClass('hoverColor');
              $('.documentation-ad').removeClass('arrow-down');

              $('#iddropHelp').css("display","none");
              $('#Help').removeClass('hoverColor');
              $('.help-icon svg').removeClass('hoverColor');
              $('.help-ad').removeClass('arrow-down');

          });

          $(document).on('mouseleave', '#iddropUsecase', function() {
              $('#iddropUsecase').css("display","none");
              $('#Usecase').removeClass('hoverColor');
              $('.usecase-icon svg').removeClass('hoverColor');
              $('.usecase-ad').removeClass('arrow-down');
          });

          $(document).on('mouseenter', '.usecase-icon', function() {
              $('#iddropUsecase').css("display","block");
              $('#Usecase').addClass('hoverColor');
              $('.usecase-icon svg').addClass('hoverColor');
              $('.usecase-ad').addClass('arrow-down');

              $('#iddropDocumentation').css("display","none");
              $('#Documentation').removeClass('hoverColor');
              $('.documentation-icon svg').removeClass('hoverColor');
              $('.documentation-ad').removeClass('arrow-down');

              $('#iddropHelp').css("display","none");
              $('#Help').removeClass('hoverColor');
              $('.help-icon svg').removeClass('hoverColor');
              $('.help-ad').removeClass('arrow-down');

          });

          // Documentation
          $(document).on('mouseenter', '#Documentation', function() {
              $('#iddropDocumentation').css("display","block");
              $('#Documentation').addClass('hoverColor');
              $('.documentation-icon svg').addClass('hoverColor');
              $('.documentation-ad').addClass('arrow-down');

              $('#iddropUsecase').css("display","none");
              $('#Usecase').removeClass('hoverColor');
              $('.usecase-icon').removeClass('hoverColor');
              $('.usecase-ad').removeClass('arrow-down');

              $('#iddropHelp').css("display","none");
              $('#Help').removeClass('hoverColor');
              $('.help-icon svg').removeClass('hoverColor');
              $('.help-ad').removeClass('arrow-down');
          });
          $(document).on('mouseleave', '#iddropDocumentation', function() {
              $('#iddropDocumentation').css("display","none");
              $('#Documentation').removeClass('hoverColor');
              $('.documentation-icon svg').removeClass('hoverColor');
              $('.documentation-ad').removeClass('arrow-down');
          });

          $(document).on('mouseenter', '.documentation-icon', function() {
              $('#iddropDocumentation').css("display","block");
              $('#Documentation').addClass('hoverColor');
              $('.documentation-icon svg').addClass('hoverColor');
              $('.documentation-ad').addClass('arrow-down');

              $('#iddropUsecase').css("display","none");
              $('#Usecase').removeClass('hoverColor');
              $('.usecase-icon svg').removeClass('hoverColor');
              $('.usecase-ad').removeClass('arrow-down');

              $('#iddropHelp').css("display","none");
              $('#Help').removeClass('hoverColor');
              $('.help-icon svg').removeClass('hoverColor');
              $('.help-ad').removeClass('arrow-down');
          });

          //Help

          $(document).on('mouseenter', '#Help', function() {
              $('#iddropHelp').css("display","block");
              $('#Help').addClass('hoverColor');
              $('.help-icon svg').addClass('hoverColor');
              $('.help-ad').addClass('arrow-down');

              $('#iddropDocumentation').css("display","none");
              $('#Documentation').removeClass('hoverColor');
              $('.documentation-icon svg').removeClass('hoverColor');
              $('.documentation-ad').removeClass('arrow-down');

              $('#iddropUsecase').css("display","none");
              $('#Usecase').removeClass('hoverColor');
              $('.usecase-icon svg').removeClass('hoverColor');
              $('.usecase-ad').removeClass('arrow-down');

          });

          $(document).on('mouseleave', '#iddropHelp', function() {
              $('#iddropHelp').css("display","none");
              $('#Help').removeClass('hoverColor');
              $('.help-icon svg').removeClass('hoverColor');
              $('.help-ad').removeClass('arrow-down');
          });

          $(document).on('mouseenter', '.help-icon', function() {
              $('#iddropHelp').css("display","block");
              $('#Help').addClass('hoverColor');
              $('.help-icon svg').addClass('hoverColor');
              $('.help-ad').addClass('arrow-down');

              $('#iddropDocumentation').css("display","none");
              $('#Documentation').removeClass('hoverColor');
              $('.documentation-icon svg').removeClass('hoverColor');
              $('.documentation-ad').removeClass('arrow-down');

              $('#iddropUsecase').css("display","none");
              $('#Usecase').removeClass('hoverColor');
              $('.usecase-icon svg').removeClass('hoverColor');
              $('.usecase-ad').removeClass('arrow-down');

          });

          $(document).on('click','.btn_language_header', function(event){
              event.stopPropagation();
              $('.common_select_cont_header').toggle();

          });

          $(document).click(function(){
              $('.common_select_cont_header').hide();
          });

          $(document).on('click','.btn_github', function(event){
              event.preventDefault();
              event.stopPropagation();
              window.open('https://github.com/brightics/studio', '_blank')
              // window.location.href='https://github.com/brightics/studio';

          });
          // Korean Language
          $(document).on('click','.lg_kr', function(event){
              setLangKr();
          });

          // English Language
          $(document).on('click','.lg_en', function(event){
              setLangEn();
          });
    });


    const { iconNode } = require("discourse-common/lib/icon-library");
    const { wantsNewWindow } = require("discourse/lib/intercept-click");
    const customHeaderLinks = settings.Custom_header_links;



    let icon = iconNode('user-times');



    if (!customHeaderLinks.length) return;

    const h = require("virtual-dom").h;
    const headerLinks = [];

    customHeaderLinks.split("|").map(i => {
      const seg = $.map(i.split(","), $.trim);
      const linkText = seg[0];
      const linkTitle = seg[1];
      const linkHref = seg[2];
      const deviceClass = `.${seg[3]}`;
      const linkTarget = seg[4] === "self" ? "" : "_blank";
      const keepOnScrollClass = seg[5] === "keep" ? ".keep" : "";
      const linkClass = `.${linkText.trim().toLowerCase().replace(/\s/gi, '-')}`;

      if (!linkTarget) {
        headerLinks.push(
          h(
            `li.headerLink${deviceClass}${keepOnScrollClass}${linkClass}${linkClass}-ad`,
            [
              h(
                  "a",
                  {
                    title: linkTitle,
                    id: linkTitle,
                    href: linkHref
                  },
                  linkText,
              ),
              h(
                `div.${linkClass}-icon`, iconNode('chevron-down', { class: "cv-down" })
              ),
            ],
          )
        );
      } else {
        headerLinks.push(
          h(
            `li.headerLink${deviceClass}${keepOnScrollClass}${linkClass}`,
            h(
              "a",
              {
                title: linkTitle,
                href: linkHref,
                target: linkTarget
              },
              linkText
            )
          )
        );
      }
    });



    const dropdown = {
    buildClasses(attrs) {
      if (attrs.active) {
        return "active";
      }
    },

    click(e) {
      if (wantsNewWindow(e)) {
        return;
      }
      e.preventDefault();
      if (!this.attrs.active) {
        this.sendWidgetAction(this.attrs.action);
      }
    }
  };

  api.reopenWidget("header-dropdown",
    jQuery.extend(
      {
        html(attrs) {
          const title = I18n.t(attrs.title);

          const body = [iconNode(attrs.icon)];
          if (attrs.contents) {
            body.push(attrs.contents.call(this));
          }

          return h(
            "a.icon.btn-flat",
            {
              attributes: {
                href: attrs.href,
                "data-auto-route": true,
                title,
                "aria-label": title,
                id: attrs.iconId
              }
            },
            body
          );
        }
      },
      dropdown
    ));


  api.reopenWidget("user-dropdown",
    jQuery.extend(
      {
        html(attrs) {
          return h(
            "a.icon.brightics-icon",
            {
              attributes: {
                href: attrs.user.get("path"),
                "data-auto-route": true
              }
            },
            this.attach("header-notifications", attrs)
          );
        }
      },
      dropdown
    )

  )



    api.reopenWidget("header-icons", {
      html(attrs) {
          if (this.siteSettings.login_required && !this.currentUser) {
            return [];
          }

          const hamburger = this.attach("header-dropdown", {
            title: "hamburger_menu",
            icon: "bars",
            iconId: "toggle-hamburger-menu",
            active: attrs.hamburgerVisible,
            action: "toggleHamburger",
            href: "",
            className:"test",
            contents() {
              let { currentUser } = this;
              if (currentUser && currentUser.reviewable_count) {
                return h(
                  "div.badge-notification.reviewables",
                  {
                    attributes: {
                      title: I18n.t("notifications.reviewable_items")
                    }
                  },
                  this.currentUser.reviewable_count
                );
              }
            }
          });

          const search = this.attach("header-dropdown", {
            title: "search.title",
            icon: "search",
            iconId: "search-button",
            action: "toggleSearchMenu",
            active: attrs.searchVisible,
            href: Discourse.getURL("/search")
          });

          const icons = [];
          if (attrs.user) {
            icons.push(
              this.attach("user-dropdown", {
                active: attrs.userVisible,
                action: "toggleUserMenu",
                ringBackdrop: attrs.ringBackdrop,
                user: attrs.user
              })
            );
          } else {
            icons.push(
              this.attach("link", {
              label: "log_in",
              className: "login-link",
              action: "showLogin",

          })
          );
          }

          icons.push(h("button.btn_github", {
                  title: "Github Repository"

              }
          ));

          icons.push(hamburger);
          icons.push(search);

          return icons;
        }
    });

    api.decorateWidget("header-buttons:before", helper => {
      return helper.h(
        "ul.custom-header-links", headerLinks
      );
    });

    api.decorateWidget("header-icons:before", helper => {
      return helper.h(
        "div.btn_language.btn_language_header.common_select_header",
         [
          helper.h ("div.common_select_title", "Global / English"),
          helper.h ("div.common_select_cont_header", {
              style: "display:none"
          },
              helper.h("ul",
                  [
                      helper.h("li.li_pr.lg_en", "Global / English"),
                      helper.h("li.li_pr.lg_kr","Korean / 한국어")
                  ]
              )
          )
         ]
         );
    });



  //   api.decorateWidget("header-icons:after", helper => {
  //     return helper.h(
  //       "button.btn_github", {
  //           title: "Github Repository"
  //       }, helper.h("span.blind", "github")
  //       );
  //   });

    api.decorateWidget("home-logo:after", helper => {
      let titleVisible = helper.attrs.minimized;
      if (titleVisible) {
        $(".d-header").addClass("hide-menus");
      } else {
        $(".d-header").removeClass("hide-menus");
      }
    });
</script>
